<div class="panel panel-default items">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th colspan="2">Product</th>
          <th>Unit Price</th>
          <th>Quantity</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody>

        <% @line_items.each do |line_item| %>

        <tr>
          <td>
            <%= image_tag line_item.product.image.tiny %>
          </td>
          <td>
            <h4><%= line_item.product.name %></h4>
            <br>
            <p><%= line_item.product.description %></p>
          </td>
          <td>
            <%= number_to_currency(line_item.product.price_cents / 100) %>
          </td>
          <td>
            <%= line_item.quantity %>
          <td>
            <% total = number_to_currency(line_item.product.price_cents / 100 * line_item.quantity) %>
            <%= total %>
          </td>
        </tr>
      <% end %>
      </tbody>
         <tfoot>
             <tr>
             <th colspan="4">
                 TOTAL:
               </th>
               <th>

                 <% total_sales = @line_items.map do |item| %>
                 <% item.item_price_cents / 100 * item.quantity %>
                 <% end %>
                 <%= number_to_currency(total_sales.sum) %>
               </th>
             </tr>
           </tfoot>
         </table>
       </div>